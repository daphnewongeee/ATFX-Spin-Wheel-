<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>ATFX Custom Wheel — Hidden Forced Mode</title>
  <style>
    body{font-family:sans-serif;background:#f6f7fb;margin:0;padding:40px;text-align:center;}
    canvas{border-radius:12px;}
    button{padding:12px 18px;margin-top:20px;font-size:16px;border:none;border-radius:8px;background:#2b6cb0;color:#fff;cursor:pointer;}
    h1{margin-bottom:24px;color:#111;}
    #results{margin-top:20px;font-size:18px;color:#111;}
  </style>
</head>
<body>
  <h1>ATFX Got Talent — Spin the Wheel</h1>
  <canvas id="wheel" width="600" height="600"></canvas><br>
  <button id="spinBtn">Spin</button>
  <div id="results"></div>

<script>
const items = ['Jordan','Vietnam','Malaysia','Philippines','Thailand','Indonesia','Egypt','UK','USA','India'];
const forcedWinners = ['Jordan','Vietnam'];
const numWinners = 5;
let picked = [];

const canvas = document.getElementById('wheel');
const ctx = canvas.getContext('2d');
const cx = canvas.width/2, cy = canvas.height/2, radius = 250;
let rotation = 0;

// Colors
const colors = ['#FFB6C1','#FFDAB9','#E6E6FA','#D8BFD8','#E0FFFF','#F0E68C','#E6FFE6','#FFE4E1','#FFF0F5','#F5F5DC'];

function drawWheel(){
  ctx.clearRect(0,0,canvas.width,canvas.height);
  const n = items.length;
  const arc = (Math.PI*2)/n;
  for(let i=0;i<n;i++){
    const start = rotation + i*arc;
    ctx.beginPath(); ctx.moveTo(cx,cy); ctx.arc(cx,cy,radius,start,start+arc); ctx.closePath();
    ctx.fillStyle = colors[i%colors.length]; ctx.fill();
    ctx.save(); ctx.translate(cx,cy); ctx.rotate(start+arc/2);
    ctx.textAlign='right'; ctx.fillStyle='#111'; ctx.font='16px sans-serif'; ctx.fillText(items[i], radius-10, 6);
    ctx.restore();
  }
  ctx.beginPath(); ctx.arc(cx,cy,48,0,Math.PI*2); ctx.fillStyle='#fff'; ctx.fill();
  // pointer
  ctx.fillStyle='#111'; ctx.beginPath(); ctx.moveTo(cx+radius+6,cy); ctx.lineTo(cx+radius+34,cy-18); ctx.lineTo(cx+radius+34,cy+18); ctx.closePath(); ctx.fill();
}

drawWheel();

function easeOutCubic(t){return 1-Math.pow(1-t,3);}

function spinToIndex(idx){
  const n = items.length;
  const arc = (Math.PI*2)/n;
  const base = -(idx*arc + arc/2);
  const spins = 3 + Math.floor(Math.random()*2);
  const finalRotation = base + spins*Math.PI*2;
  const start = performance.now();
  const from = rotation;
  function animate(now){
    const t = Math.min(1,(now-start)/3000);
    rotation = from + (finalRotation-from)*easeOutCubic(t);
    drawWheel();
    if(t<1) requestAnimationFrame(animate);
    else{
      rotation = (rotation%(Math.PI*2)+Math.PI*2)%(Math.PI*2);
      pickNext();
    }
  }
  requestAnimationFrame(animate);
}

function pickNext(){
  if(picked.length>=numWinners){
    document.getElementById('results').innerHTML = 'Winners: '+picked.join(', ');
    return;
  }
  let next;
  if(forcedWinners.length>0){
    next = forcedWinners.shift();
  } else {
    const remaining = items.filter(i=>!picked.includes(i));
    next = remaining[Math.floor(Math.random()*remaining.length)];
  }
  picked.push(next);
  const idx = items.indexOf(next);
  spinToIndex(idx);
}

document.getElementById('spinBtn').addEventListener('click',()=>{
  picked=[];
  forcedWinners.length = 0;
  forcedWinners.push('Jordan','Vietnam');
  pickNext();
});
</script>
</body>
</html>
